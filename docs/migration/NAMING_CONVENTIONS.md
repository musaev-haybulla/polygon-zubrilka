# üè∑Ô∏è –°–æ–≥–ª–∞—à–µ–Ω–∏—è –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é

–ü—Ä–∏–Ω—è—Ç—ã–µ —Ä–µ—à–µ–Ω–∏—è –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ Laravel –ø—Ä–æ–µ–∫—Ç–µ.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã

1. **–ò–∑–±–µ–≥–∞–µ–º –¥–≤–æ–π–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π** - –Ω–∏–∫–∞–∫–∏—Ö PoemLine, TrackAudio
2. **–ü–æ—ç—Ç–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è** - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –≥–¥–µ —É–º–µ—Å—Ç–Ω–æ
3. **–ö—Ä–∞—Ç–∫–æ—Å—Ç—å –≤–∞–∂–Ω–µ–µ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** - Verse –ª—É—á—à–µ PoemLine
4. **–ë–µ–∑ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ —Å SQL** - –∏–∑–±–µ–≥–∞–µ–º –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ª–æ–≤

## üìö –û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏

### –ü–æ—ç—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
```php
Poem      // –°—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ/–ø–æ—ç–º–∞ (–ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞)
Fragment  // –§—Ä–∞–≥–º–µ–Ω—Ç/—á–∞—Å—Ç—å –ø–æ—ç–º—ã (–æ—Å—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å)
Verse     // –°—Ç—Ä–æ–∫–∞ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏—è (–±—ã–ª–æ Line)
```

### –ê—É–¥–∏–æ –∏ —Ç–∞–π–º–∏–Ω–≥–∏
```php
Track     // –ê—É–¥–∏–æ–∑–∞–ø–∏—Å—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞
Timing    // –¢–∞–π–º–∏–Ω–≥ —Å—Ç—Ä–æ–∫–∏ –≤ —Ç—Ä–µ–∫–µ
```

### –ê–≤—Ç–æ—Ä—ã –∏ —Å–≤—è–∑–∏
```php
Author      // –ê–≤—Ç–æ—Ä
PoemAuthor  // –°–≤—è–∑—å –∞–≤—Ç–æ—Ä-–ø–æ—ç–º–∞ (–∏—Å–∫–ª—é—á–µ–Ω–∏–µ: –±–µ–∑ —ç—Ç–æ–≥–æ –Ω–∏–∫–∞–∫)
```

## üîÑ –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç —Ç–µ–∫—É—â–µ–π —Å—Ö–µ–º—ã

| –ë—ã–ª–æ | –°—Ç–∞–ª–æ | –ü—Ä–∏—á–∏–Ω–∞ |
|------|-------|---------|
| `lines` | `verses` | –ö–æ–Ω—Ñ–ª–∏–∫—Ç —Å SQL keyword LINE |
| `Line` | `Verse` | –ü–æ—ç—Ç–∏—á–µ—Å–∫–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è |
| `line_number` | `position` | –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Å –¥—Ä—É–≥–∏–º–∏ —Ç–∞–±–ª–∏—Ü–∞–º–∏ |

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

```
poems           // –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π
‚îú‚îÄ‚îÄ fragments   // –ß–∞—Å—Ç–∏ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ verses  // –°—Ç—Ä–æ–∫–∏ (–±—ã–ª–æ lines)
‚îú‚îÄ‚îÄ tracks      // –ê—É–¥–∏–æ–∑–∞–ø–∏—Å–∏
‚îî‚îÄ‚îÄ timings     // –¢–∞–π–º–∏–Ω–≥–∏ —Å—Ç—Ä–æ–∫

authors         // –ê–≤—Ç–æ—Ä—ã
poem_authors    // –°–≤—è–∑–∏ (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –¥–≤–æ–π–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ)
```

## üé≠ –î–æ–º–µ–Ω–Ω–∞—è —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏—è

### –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø–æ—ç–∑–∏–∏:
- **Verse** - —Å—Ç—Ä–æ–∫–∞ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–µ–Ω–∏—è
- **Fragment** - –ª–æ–≥–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- **Poem** - –ª—é–±–æ–µ —Å—Ç–∏—Ö–æ—Ç–≤–æ—Ä–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ

### –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Å–∏—Å—Ç–µ–º—ã:
- **Track** - –∞—É–¥–∏–æ—Ñ–∞–π–ª —Å –æ–∑–≤—É—á–∫–æ–π
- **Timing** - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ —Å—Ç—Ä–æ–∫–∏
- **Status** - —Å–æ—Å—Ç–æ—è–Ω–∏–µ (draft/published/active)

## üö´ –ß—Ç–æ –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º

```php
// ‚ùå –î–≤–æ–π–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è
PoemLine, TrackAudio, FragmentPart

// ‚ùå –°–æ–∫—Ä–∞—â–µ–Ω–∏—è
Ln, Frag, Aud

// ‚ùå –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã –¥–ª—è –ø–æ—ç–∑–∏–∏
Row, Record, Item

// ‚ùå SQL –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã
Line, Order, Group
```

## ‚úÖ –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

### –ú–æ–¥–µ–ª–∏
```php
class Poem extends Model {}
class Fragment extends Model {}
class Verse extends Model {}       // –±—ã–ª–æ Line
class Track extends Model {}
class Timing extends Model {}
class Author extends Model {}
```

### –ú–µ—Ç–æ–¥—ã –º–æ–¥–µ–ª–µ–π
```php
// ‚úÖ –ß–µ—Ç–∫–∏–µ, —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏–º–µ–Ω–∞
$verse->isLast()
$track->isTimingComplete()
$poem->canBePublished()
$fragment->hasActiveAudio()
```

### UseCase –∫–ª–∞—Å—Å—ã
```php
CreatePoem
CreateFragment
CreateVerse              // –±—ã–ª–æ CreateLine
UploadAudio
SetVerseTiming          // –±—ã–ª–æ SetLineTiming
PublishPoem
```

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ

### –í –º–∏–≥—Ä–∞—Ü–∏—è—Ö:
```php
Schema::create('verses', function (Blueprint $table) {
    $table->id();
    $table->foreignId('fragment_id')->constrained();
    $table->integer('position');  // –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è
    $table->string('text');
    $table->boolean('end_line')->default(false);
    $table->timestamps();
    
    $table->index(['fragment_id', 'position']);
});
```

### –í –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö:
```php
class Fragment extends Model {
    public function verses() {
        return $this->hasMany(Verse::class)->orderBy('position');
    }
}
```

### –í UseCase:
```php
class SetVerseTiming {
    public function execute(Track $track, Verse $verse, float $endTime): void
    {
        // –ª–æ–≥–∏–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç–∞–π–º–∏–Ω–≥–∞ —Å—Ç—Ä–æ–∫–∏
    }
}
```

---
**–î–∞—Ç–∞ –ø—Ä–∏–Ω—è—Ç–∏—è**: –Ø–Ω–≤–∞—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å**: –ü—Ä–∏–Ω—è—Ç–æ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏